import Source = require("../Source");
import BlocksSketch = require("../../BlocksSketch");
import Grid = require("../../Grid");
import Particle = require("../../Particle");

class Granular extends Source {

    public Grains: Tone.Player[];
    private _Envelopes: Tone.Envelope[];
    public Timeout;
    public EndTimeout;
    private _CurrentGrain: number;
    private _IsLoaded: boolean;
    public Filename: string;
    public GrainSettings;
    public MaxDensity: number;
    private _NoteOn: boolean;
    public PlaybackRate: number;
    public WaveUrl: string;
    public Waveform: number[];


    Init(sketch?: Fayde.Drawing.SketchContext): void {

        super.Init(sketch);

        this.CreateSource();

        this._IsLoaded = false;

        var tracks = ["183588346","48387282","127905486","50894420","12216090","76097469","130501492"];

        this.Filename = tracks[4];
        this.WaveUrl = "http://w1.sndcdn.com/fxguEjG4ax6B_m.png";
        this.WaveUrl = "../Assets/Waveforms/02.png";
        this.Waveform = [];

        this.GrainSettings = {
            "rate": 0.3,
            "density": 10,
            "smoothness": 0.06,
            "region": 0,
            "spread": 1.5,
            "grainlength": 0.06

        };
        this.GrainSettings.rate = this.GrainSettings.grainlength*2;
        this.GrainSettings.smoothness = this.GrainSettings.grainlength*0.49;

        // INIT //
        this.MaxDensity = 16;
        this.Grains = [];
        this._Envelopes = [];
        this._CurrentGrain = 0;
        this._NoteOn = false;
        this.PlaybackRate = 1;
        this.SetTrack();


        this.CreateEnvelope();

        this.Envelopes.forEach((e: any, i: number)=> {
            e.connect(this.Sources[i].output.gain);
        });

        // Define Outline for HitTest
        this.Outline.push(new Point(-1, 0),new Point(0, -1),new Point(1, -1),new Point(2, 0),new Point(2, 1),new Point(1, 2));
    }

    // LOAD THE AUDIO & CONNECT UP//
    SetTrack() {
        this._IsLoaded = false;
        var id = "7258ff07f16ddd167b55b8f9b9a3ed33";
        var gran = this;

        SC.get('/tracks/'+this.Filename, {}, function(track) {

            console.log(track);
            gran.WaveUrl = track.waveform_url;
            $.getJSON("http://blobdust.azurewebsites.net/api/Wave64/", {url: gran.WaveUrl}, function(data) {
                var waveform;
                waveform = new Image();
                waveform.src = data.data;
                //var data = "data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACX8n//93//T/8IAAAAAAAAAAAA8BvwF6MAAPDL8D0IAAAAAAAAAAAAPwd/MQoAAL8M34MAAAAAAAAAAADwc/AXowAA8MvwPQgAAAAAAAAAAAA/B38xCgAAv8zre5DvQgAAAAAAAAAAAPgp+EtRAAD4ZfgPhAAA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";
                //waveform.src = data;
                waveform.onload = function() {
                    //return waveform;
                    gran.LoadWaveform(waveform);
                };
            });



        });

        var audioUrl = "https://api.soundcloud.com/tracks/" + this.Filename + "/stream" + "?client_id=" + id;

        // RESET //
        this.Grains.length = 0;
        this._Envelopes.length = 0;


        // LOAD AUDIO//
        for (var i=0; i<this.MaxDensity; i++) {
            if (i==0) { // first buffer callback
                this.Grains[i] = new Tone.Player(audioUrl, function (sc) {
                    console.log(sc);
                    gran._IsLoaded = true;
                    gran.GrainSettings.region = gran.GetDuration()*0.5;
                });
            } else {  // remaining buffers
                this.Grains[i] = new Tone.Player(audioUrl);
            }
            this._Envelopes[i] = new Tone.Envelope(this.GrainSettings.smoothness,0.01,0.9,this.GrainSettings.smoothness);

            // CONNECT //
            this._Envelopes[i].connect(this.Grains[i].output.gain);
            this.Grains[i].connect(this.Sources[0]);
            this.Sources[0].connect(this.EffectsChainInput);

            this.Grains[i].playbackRate = this.PlaybackRate;
        }



    }

    LoadWaveform(img) {
        var loader = new PxLoader(); //// Use PX Loader to handle image load
        //var img = loader.addImage(this.WaveUrl);
        var ctx = this.Sketch.Ctx;
        var gran = this;
        var waveform = [];

        //loader.addCompletionListener(() => { //// callback that will be run once image is ready

            // metrics //
            var imglength = img.width; //// get number of colours
            var perc = this.Sketch.Size.width/imglength;
            var length = this.Sketch.Size.width;
            var height = Math.round(img.height*perc); //// get number of colours

            // place image //
            ctx.fillStyle = "#000";// black
            ctx.fillRect(0,0,length,height/2);
            ctx.drawImage(img, 0, -(height/2), length, height); //// temporarily place image half visible

            // get data //
            var imgdata = ctx.getImageData(0, 0, length, Math.floor(height/2)); //// get half the image data
            var pal = imgdata.data; // data for lower half
            //console.log(pal);

            var bits = 4;
            var sample = 6;

            var cols = Math.floor(length/sample);
            var rows = Math.floor(height/(sample));

            for (var i = 0; i < cols; i ++) {
                waveform[i] = 0;
                for (var j=0; j<rows; j++) {
                    var dataPoint = ((i*sample)*bits) + (((j*(sample*0.5))*length)*bits);
                    if (pal[dataPoint]!==0) { // if not black (wave color)
                        break;
                    }
                    waveform[i] = (1/rows)*j;
                }
            }

            gran.Waveform = waveform;
            console.log(gran.Waveform.length);
        //});

        //loader.start(); //// begin downloading image
    }



    UpdateOptionsForm() {
        super.UpdateOptionsForm();

        this.OptionsForm =
        {
            "name" : "Granular",
            "parameters" : [

                {
                    "type" : "waveslider",
                    "name" : "Location",
                    "setting" :"region",
                    "props" : {
                        "value" : this.GetParam("region"),
                        "min" : 0,
                        "max" : this.GetDuration(),
                        "quantised" : false,
                        "centered" : false,
                        "wavearray" : this.Waveform,
                        "spread" : this.GetParam("spread")
                    }
                },
                {
                    "type" : "sample",
                    "name" : "Sample",
                    "setting" :"sample",
                    "props" : {
                        "track" : this.GetParam("track"),
                        "user" : this.GetParam("user")
                    }
                },
                {
                    "type" : "slider",
                    "name" : "Spread",
                    "setting" :"spread",
                    "props" : {
                        "value" : this.GetParam("spread"),
                        "min" : 0,
                        "max" : 4,
                        "quantised" : false,
                        "centered" : false
                    }
                },
                {
                    "type" : "slider",
                    "name" : "Grain Size",
                    "setting" :"grainlength",
                    "props" : {
                        "value" : this.GetParam("grainlength"),
                        "min" : 0.03,
                        "max" : 0.5,
                        "quantised" : false,
                        "centered" : false
                    }
                },
                {
                    "type" : "slider",
                    "name" : "Density",
                    "setting" :"density",
                    "props" : {
                        "value" : this.GetParam("density"),
                        "min" : 2,
                        "max" : this.MaxDensity,
                        "quantised" : true,
                        "centered" : false
                    }
                }
            ]
        };
    }

    GetDuration() {
        if (this.Grains){
            return this.Grains[0].duration;
        }
        return 0;
    }

    Update() {
        super.Update();

    }

    Draw() {
        super.Draw();
        (<BlocksSketch>this.Sketch).BlockSprites.Draw(this.Position,true,"granular");
    }

    MouseDown() {
        super.MouseDown();
        this.TriggerAttack();

    }

    MouseUp() {
        super.MouseUp();
        this.TriggerRelease();
    }

    CreateSource(){
        super.CreateSource();
        this.Sources.push( new Tone.Signal() );

    }

    CreateEnvelope(){
        super.CreateEnvelope();
        this.Envelopes.push( new Tone.Envelope(
            this.Settings.envelope.attack,
            this.Settings.envelope.decay,
            this.Settings.envelope.sustain,
            this.Settings.envelope.release
        ) );
    }

    TriggerAttack() {
        super.TriggerAttack();

        if (this._IsLoaded) {
            this.Envelopes.forEach((e: any)=> {
                e.triggerAttack();
            });

            clearTimeout(this.EndTimeout);
            if (!this._NoteOn) {

                this._NoteOn = true;
                this.GrainLoop();
            }
        }

    }

    TriggerRelease() {
        super.TriggerRelease();

        this.Envelopes.forEach((e: any)=> {
            e.triggerRelease();
        });

        var gran = this;
        //clearTimeout(this.EndTimeout);
        this.EndTimeout = setTimeout(function() {
            gran._NoteOn = false;
            console.log("END");
        },<any>this.Envelopes[0].release*1000);
    }

    TriggerAttackRelease(){

    }



    ParticleCollision(particle: Particle) {
        super.ParticleCollision(particle);
        particle.Dispose();
    }


    GrainLoop() {

        // CYCLES THROUGH GRAINS AND PLAYS THEM //
        // todo: clicking issue to be addressed (noticeable when connected to filter/gain blocks)
        if (this._NoteOn) {
            if (this._Envelopes[this._CurrentGrain]) {
                var gran = this;
                var delay = (this.GrainSettings.rate / this.GrainSettings.density);
                var location = this.GrainSettings.region - (this.GrainSettings.spread * 0.5) + (Math.random() * this.GrainSettings.spread);
                location = this.LocationRange(location);

                // MAKE SURE THESE ARE IN SYNC //
                this._Envelopes[this._CurrentGrain].triggerAttackRelease(this.GrainSettings.smoothness,"+0");
                this.Grains[this._CurrentGrain].stop();
                this.Grains[this._CurrentGrain].playbackRate = this.PlaybackRate;
                this.Grains[this._CurrentGrain].start();
                //this.Grains[this._CurrentGrain].start("+0", location, (this.GrainSettings.grainlength*this.PlaybackRate)*1.9);

                clearTimeout(this.Timeout);
                this.Timeout = setTimeout(function() {
                    gran.GrainLoop();
                },Math.round(delay*1500));

                //console.log("" + this._CurrentGrain + " | " + playRate);

                this._CurrentGrain += 1;
                if (this._CurrentGrain >= this.GrainSettings.density) {
                    this._CurrentGrain = 0;
                }
            }
        }
    }

    // CAP POSITIONS OF GRAINS TO STAY WITHIN TRACK LENGTH //
    LocationRange(location) {
        if (location<0) {
            location = 0;
        }
        if (location>(this.Grains[0].duration - this.GrainSettings.grainlength)) {
            location = (this.Grains[0].duration - this.GrainSettings.grainlength);
        }
        return location;
    }

    SetPitch(pitch: number, sourceId?: number, rampTime?: Tone.Time) {
        super.SetPitch(pitch, sourceId, rampTime);
        for (var i=0; i<this.MaxDensity; i++) {
            pitch /= 440;
            this.PlaybackRate = pitch;
        }
    }


    GetParam(param: string) {

        if (this.GrainSettings) {
            var val;
            switch (param){

                case "density": val = this.GrainSettings.density;
                    break;
                case "grainlength": val = this.GrainSettings.grainlength;
                    break;
                case "spread": val = this.GrainSettings.spread;
                    break;
                case "region": val = this.GrainSettings.region;
                    break;
                case "regionmin": val = (this.GrainSettings.spread*1.5);
                    break;
                case "regionmax": val = this.Grains[0].duration;
                    break;
                case "track": val = "piano";
                    break;
                case "user": val = "kingstone";
                    break;
            }
            return val;
        }

    }

    SetParam(param: string,value: number) {
        super.SetParam(param,value);

        switch (param){
            case "density": this.GrainSettings.density = value;
                break;
            case "grainlength":
                this.GrainSettings.grainlength = value;
                this.GrainSettings.rate = this.GrainSettings.grainlength*2;
                this.GrainSettings.smoothness = this.GrainSettings.grainlength*0.5;
                for (var i=0; i< this.MaxDensity; i++) {
                    this._Envelopes[i].attack = this.GrainSettings.smoothness;
                    this._Envelopes[i].release = this.GrainSettings.smoothness;
                }

                break;
            case "spread": this.GrainSettings.spread = value;
                break;
            case "region": this.GrainSettings.region = value;
                break;
        }
    }



    Dispose(){
        super.Dispose();
        clearTimeout(this.Timeout);
        this._NoteOn = false;
        for (var i=0; i<this.MaxDensity; i++) {
            this.Grains[i].stop();
            this.Grains[i].dispose();
            this._Envelopes[i].dispose();
        }

        this.Grains.length = 0;
        this._Envelopes.length = 0;

        this.Envelopes.forEach((e: any)=> {
            e.dispose();
        });

        this.Sources.forEach((s: any)=> {
            s.dispose();
        });
    }

}

export = Granular;